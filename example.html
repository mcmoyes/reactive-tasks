<html>
<head>
    <script src="./reactive-tasks.js"></script>
    <style>
        .completed {
            text-decoration: line-through;
            animation: highlight 1s;
        }
        code {
            background:#eee;
            padding:10px;
        }
        @keyframes highlight {
            0% {
                background-color:white;
            }
            50% {
                background-color:yellow;
            }
            100% {
                background-color:white;
            }

        }
    </style>
</head>
<body>
    <code>
        let milks = 0;
        const consumed = [];
    </code>
    <h2>Tasks</h2>
    <ul>
        <li id="parent-task">Strengthen bones
            <ul>
                <li id="task1">Get milk: Open the console and set the variable 'milks' to a value greater than 0.</li>
                <li id="task2">Drink milk: In the console, call consumeMilk() (or push  the string 'milk' to the consumed array).</li>
            </ul>
        </li>
    </ul>
    <p></p>
    <p>For example:</p>
    <code>milks = 5</code>
<script>

    let milks = 0;
    const consumed = [];
    const hasMilk = () => milks > 0;
    const drankMilk = () => consumed.includes('milk');
    const consume = item => consumed.push(item);
    const consumeMilk = () => {
        if (hasMilk()) {
            consume('milk');
        }
    }

    var task1 = rt.addTask("GetMilk");
    var task2 = rt.addTask("DrinkMilk");
    rt.addTask("StrongBones");

    task1.when(hasMilk).do(() => {
        console.log("Got Milk!")
    }).$complete("#task1");
    task2.when(drankMilk).$complete("#task2");
    rt.getTask("StrongBones").when("GetMilk", "DrinkMilk").$complete("#parent-task");

</script>
</body>
</html>